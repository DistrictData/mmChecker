<html>
  <head>
    <!-- Moralis SDK code -->
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://unpkg.com/moralis/dist/moralis.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
  <body>
    

    <div class="text-center">
      <h1>I Own This NFT</h1>
      <br></br>
      <br></br>
      <button type="button" class="btn btn-success btn-lg"  onclick="login()" id="btn-login">Connect Wallet</button>
      <button type="button" class="btn btn-danger btn-lg" onclick="logOut()" id="btn-logout">Disconnect</button> 
      <br></br>
      <p> Select one from the given options:
        <select id="select1">
            <option value="dadmfers">dadmsfers</option>
            <option value="Sacred Skulls">Sacred Skulls</option>
            <option value="BAYC">BAYC</option>
        </select> 
      </p> 
      <br></br>
      <button onclick="getNFTBalances()" id="btn-nft">Prove Ownership</button>
    </div>


    




     
    <script type="text/javascript">
    function getOption() {
        selectElement = document.querySelector('#select1');
        output = selectElement.value;
        // document.querySelector('.output').textContent = output;
        console.log(output);
    }
    </script>

    <script>
        // connect to Moralis server
        Moralis.initialize("kxTKSdHra23jlD9dfWFRHi83tAClmKWTLgmkIQwq");
        Moralis.serverURL = "https://uiv0mpp7cdoh.usemoralis.com:2053/server";

        // LOG IN WITH METAMASK
        async function login() {
          let user = Moralis.User.current();
          if (!user) {
            user = await Moralis.authenticate();
          }
          console.log("logged in user:", user);5
        }

        // LOG OUT
        async function logOut() {
          await Moralis.User.logOut();
          console.log("logged out");
        }
        
        getNFTBalances = async () => {
            // get NFTs for current user on Mainnet

            const options = { chain: 'eth'};
            const userEthNFTs = await Moralis.Web3.getNFTs(options);

            function search(nameKey, userEthNFTs){
              for (var i=0; i < userEthNFTs.length; i++) {
                  if (userEthNFTs[i].name === nameKey) {
                      return userEthNFTs[i];
                  }
              }
            }
            selectElement = document.querySelector('#select1');
            output = selectElement.value;
            console.log(output);

            var resultObject = search(output, userEthNFTs);

            if(typeof resultObject !== "undefined")
            {
              alert("Hi. You Own This NFT!");
            } else {
              alert("You Dont Own This NFT")
            }

            console.log(userEthNFTs);
            // console.log(resultObject);
        }
        // getNFTBalances();


    </script>
  </body>
</html>
